[TOC]



# 存储类别、链接、内存管理

内存管理是 C 水平的分水岭，从这一步才真正进入 C 大门。

## 存储类别

标识符、对象、存储期、作用域、链接。

大体上就是**标识符**可以用来标识内存中的存储**对象**从而允许程序通过标识符使用对象。此处的对象和 JAVA 中的对象是不同的， JAVA 中的对象是类型的实例对象，包含数据和对数据进行的操作，而 C 中的对象就是用来存储的。一个对象可以存储一个或多个值或不存值，但当对象中有存储内容时，对象一定具有相应的大小。

**存储期**用来描述对象，**作用域**和**链接**用来描述标识符。笼统说就是指定生效区域和时域的作用。

### 作用域

描述程序中可访问标识符的区域，C 中变量的作用域有：块作用域、函数作用域、函数原型作用域、文件作用域。

1. 块作用域就是花括号 {} ，开头到结尾都属于一块。对于一个功能函数来讲，它的形式参数虽然声明在花括号外部，但其属于该函数块，所以也在域内。所谓块中块，就是嵌套的块。之前写的类似 for(int i=0) 这样的声明方式，就是在块内任意位置声明，是 C99 标准，之前的标准要求在块的开头声明所有块变量。

2. 函数作用域仅用于 goto 标签。即使 goto 标签出现在函数的内层块中，它的作用域会延伸到整个函数，以此解决如果在两个块中出现相同的标签会造成混乱的情况。

3. 函数原型作用域，函数原型中的形参名称只从形参定义处开始，至原型声明结束为止有效。 所以，这个形参实际上是没什么存在感的，这也是在函数原型中可以省略形式参数名的原因，因为本来就这么小的作用域，而且跟实际参数还不一定一致。只有在变长数组中，形参名才有用不可省略。

   ```
   void use_a_VLA(int n, int m, ar[n][m]);
   方括号中必须使用在函数原型中已声明的名称。
   ```

   

4. 文件作用域，指的是在函数外面声明的变量，习惯上讲叫作全局变量，从定义处到文件末尾都有效。在编译时，可能会出现单个文件，也可能有多个文件，文件被称为翻译单元，每个翻译单元对应一个源代码文件和包含的头文件，全局变量的作用域也就是整个翻译单元。

5. 